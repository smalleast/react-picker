!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("classnames"),require("react")):"function"==typeof define&&define.amd?define(["classnames","react"],t):"object"==typeof exports?exports.ReactPicker=t(require("classnames"),require("react")):e.ReactPicker=t(e.classnames,e.react)}(this,function(e,t){return function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={exports:{},id:a,loaded:!1};return e[a].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="/",t(0)}([function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var o=n(5),r=a(o),i=n(3),s=a(i);e.exports={ReactPicker:r.default,PickerGroup:s.default}},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(2),l=a(u),c=n(1),p=a(c),f=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={touching:!1,ogY:0,ogTranslate:0,touchId:void 0,translate:0,totalHeight:0,selected:0,animating:n.props.animation},n.handleTouchStart=n.handleTouchStart.bind(n),n.handleTouchMove=n.handleTouchMove.bind(n),n.handleTouchEnd=n.handleTouchEnd.bind(n),n.updateSelected=n.updateSelected.bind(n),n}return i(t,e),s(t,[{key:"componentDidMount",value:function(){this.adjustPosition(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.adjustPosition(e)}},{key:"adjustPosition",value:function(e){var t=this,n=e.items,a=e.itemHeight,o=e.indicatorTop,r=e.defaultIndex,i=n.length*a,s=i<=o?o:0;if(r>-1)if(0===s){var u=Math.floor(o/a);if(r>u){var l=r-u;s-=l*a}else r===u?s=0:s+=Math.abs(u-r)*a}else s-=a*r;this.setState({selected:r,ogTranslate:s,totalHeight:i,translate:s},function(){return r>-1?t.updateSelected(!1):t.updateSelected()})}},{key:"updateSelected",value:function(e){var t=this,n=this.props,a=n.items,o=n.itemHeight,r=n.indicatorTop,i=n.indicatorHeight,s=n.onChange,u=n.groupIndex,l=0;if(a.forEach(function(e,n){!e.disabled&&t.state.translate+o*n>=r&&t.state.translate+o*n+o<=r+i&&(l=n)}),s&&e){var c={item:a[l],selectedIndex:l,groupIndex:u};s(c)}}},{key:"handleTouchStart",value:function(e){this.state.touching||this.props.items.length<=1||this.setState({touching:!0,ogTranslate:this.state.translate,touchId:e.targetTouches[0].identifier,ogY:0===this.state.translate?e.targetTouches[0].pageY:e.targetTouches[0].pageY-this.state.translate,animating:!1})}},{key:"handleTouchMove",value:function(e){if(this.state.touching&&!(this.props.items.length<=1)&&e.targetTouches[0].identifier===this.state.touchId){e.preventDefault();var t=e.targetTouches[0].pageY,n=t-this.state.ogY;this.setState({translate:n})}}},{key:"handleTouchEnd",value:function(e){var t=this;if(this.state.touching&&!(this.props.items.length<=1)){var n=this.props,a=n.indicatorTop,o=n.indicatorHeight,r=n.itemHeight,i=this.state.translate;if(Math.abs(i-this.state.ogTranslate)<.51*r)i=this.state.ogTranslate;else if(i>a)i=a;else if(i+this.state.totalHeight<a+o)i=a+o-this.state.totalHeight;else{var s=0,u=0,l=(i-this.state.ogTranslate)/r;Math.abs(l)<1?s=l>0?1:-1:(u=Math.abs(l%1*100)>50?1:0,s=l>0?Math.floor(l)+u:Math.ceil(l)-u),i=this.state.ogTranslate+s*r}this.setState({touching:!1,ogY:0,touchId:void 0,ogTranslate:0,animating:!0,translate:i},function(){return t.updateSelected(!0)})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.items,a=t.className,o=(t.height,t.itemHeight,t.indicatorTop,t.indicatorHeight,t.onChange,t.aniamtion,t.groupIndex,t.defaultIndex,t.mapKeys,t.others,(0,p.default)("weui-picker__group",a)),r={transform:"translate(0, "+this.state.translate+"px)",transition:this.state.animating?"transform .3s":"none"};return l.default.createElement("div",{className:o,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd},l.default.createElement("div",{className:"weui-picker__mask"}),l.default.createElement("div",{className:"weui-picker__indicator"}),l.default.createElement("div",{className:"weui-picker__content",style:r,ref:"content"},n.map(function(t,n){var a=t[e.props.mapKeys.label],o=(0,p.default)("weui-picker__item",{"weui-picker__item_disabled":t.disabled});return l.default.createElement("div",{key:n,className:o},a)})))}}]),t}(l.default.Component);f.propTypes={height:l.default.PropTypes.number,itemHeight:l.default.PropTypes.number,indicatorTop:l.default.PropTypes.number,indicatorHeight:l.default.PropTypes.number,onChange:l.default.PropTypes.func,aniamtion:l.default.PropTypes.bool,groupIndex:l.default.PropTypes.number,defaultIndex:l.default.PropTypes.number},f.defaultProps={height:238,itemHeight:34,indicatorTop:102,indicatorHeight:34,aniamtion:!0,groupIndex:-1,defaultIndex:-1,mapKeys:{label:"label"}},t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(2),c=a(l),p=n(1),f=a(p),h=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.transparent,n=e.className,a=e.others,o=(0,f.default)({"weui-mask":!t,"weui-mask_transparent":t},n);return c.default.createElement("div",s({className:o},a))}}]),t}(c.default.Component);h.propTypes={transparent:c.default.PropTypes.bool},h.defaultProps={transparent:!1},t.default=h},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(2),c=a(l),p=n(3),f=a(p),h=n(1),d=a(h),g=n(4),y=(a(g),function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selectedItem:null,selected:n.props.defaultSelect?n.props.defaultSelect:Array(n.props.groups.length).fill(-1),actions:[{label:n.props.lang.leftBtn,onClick:function(e){return n.handleClose(function(){n.props.onCancel&&n.props.onCancel(e)})}},{label:n.props.lang.rightBtn,onClick:function(e){return n.handleChanges()}}],closing:!1},n.handleChanges=n.handleChanges.bind(n),n.handleChange=n.handleChange.bind(n),n.handleClose=n.handleClose.bind(n),n}return i(t,e),u(t,[{key:"handleChanges",value:function(){var e=this;this.handleClose(function(){e.props.onChange&&e.props.onChange(e.state.selectedItem,e.state.selected,e)})}},{key:"handleChange",value:function(e){var t=this,n=e.item,a=e.selectedIndex,o=e.groupIndex,r=this.state.selected;r[o]=a,this.setState({selected:r,selectedItem:n},function(){t.props.onGroupChange&&t.props.onGroupChange(e,t.state.selected,t)})}},{key:"handleClose",value:function(e){var t=this;this.setState({closing:!0},function(){return setTimeout(function(){t.setState({closing:!1}),e()},300)})}},{key:"renderActions",value:function(){var e=this,t=this.state.actions.map(function(t,n){var a=t.label,o=t.onClick;return c.default.createElement("a",{onClick:o.bind(e),key:n,className:"weui-picker__action"}," ",a)});return c.default.createElement("div",{className:"weui-picker__hd"},t)}},{key:"renderGroups",value:function(){var e=this;return this.props.groups.map(function(t,n){return c.default.createElement(f.default,s({key:n},t,{onChange:e.handleChange,groupIndex:n,defaultIndex:e.state.selected[n]}))})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.show,a=(0,d.default)("weui-picker",{"weui-animate-slide-up":n&&!this.state.closing,"weui-animate-slide-down":this.state.closing},t);(0,d.default)({"weui-animate-fade-in":n&&!this.state.closing,"weui-animate-fade-out":this.state.closing});return!!this.props.show&&c.default.createElement("div",null,c.default.createElement("div",{className:a},this.renderActions(),c.default.createElement("div",{className:"weui-picker__bd"},this.renderGroups())))}}]),t}(l.Component));y.propTypes={actions:l.PropTypes.array,groups:l.PropTypes.array,defaultSelect:l.PropTypes.array,onGroupChange:l.PropTypes.func,onChange:l.PropTypes.func,onCancel:l.PropTypes.func,show:l.PropTypes.bool,lang:l.PropTypes.object},y.defaultProps={actions:[],groups:[],show:!1,lang:{leftBtn:"取消",rightBtn:"确定"}},t.default=y}])});
//# sourceMappingURL=react-picker.js.map